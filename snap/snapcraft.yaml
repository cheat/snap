name: cheat # you probably want to 'snapcraft register <name>'
version: 'v2.3.1.build.7'
summary: cheat allows to create and view interactive cheatsheets on the command-line.
description: |
  cheat allows you to create and view interactive cheatsheets on the command-line. 
  It was designed to help remind *nix system administrators of options for commands 
  that they use frequently, but not frequently enough to remember.
  Source comes from https://github.com/chrisallenlane

grade: stable # must be 'stable' to release into candidate/stable channels
confinement: strict # use 'strict' once you have the right plugs and slots

apps:
  cheat:
    environment: 
      CHEAT_EDITOR: nano
    command: cheat
    plugs: [home]
    
parts:
  cheat:
    source: https://github.com/chrisallenlane/cheat.git
    plugin: python
    python-version: python2
    python-packages:
      - termcolor
      - docopt
      - pygments
    stage-packages: 
      - nano
    override-build: |
      git apply $SNAPCRAFT_STAGE/../patches/Bugfix-encoding-issue.patch
      snapcraftctl build
    override-prime: |
      snapcraftctl prime
      echo "SNAPCRAFT_PRIME: $SNAPCRAFT_PRIME"
      echo "SNAPCRAFT_STAGE: $SNAPCRAFT_STAGE"
      echo "SNAPCRAFT_PART_BUILD: $SNAPCRAFT_PART_BUILD"
      echo "I am executed in: $(pwd)"
      mkdir -p $SNAPCRAFT_PRIME/usr/share/cheat
      cp $SNAPCRAFT_PART_BUILD/cheat/cheatsheets/* $SNAPCRAFT_PRIME/usr/share/cheat/

