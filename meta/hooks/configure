#!/bin/sh
set -ex

echo "$SNAP or $SNAP_DATA"
mkdir -p $SNAP_DATA/usr/share/cheat
touch $SNAP_DATA/usr/share/cheat/conf.yml
cat << EOF > $SNAP_DATA/usr/share/cheat/conf.yml
# I am in: $SNAP
# The editor to use with 'cheat -e <sheet>'. Defaults to $EDITOR or $VISUAL.
editor: vim

# Should 'cheat' always colorize output?
colorize: true

# Which 'chroma' colorscheme should be applied to the output?
# Options are available here:
#   https://github.com/alecthomas/chroma/tree/master/styles
style: monokai

# Which 'chroma' "formatter" should be applied?
# One of: "terminal", "terminal256", "terminal16m"
formatter: terminal16m

cheatpaths:
# Paths that come earlier are considered to be the most "global", and will
# thus be overridden by more local cheatsheets. That being the case, you
# should probably list community cheatsheets first.
#
# Note that the paths and tags listed below are just examples. You may freely
# change them to suit your needs.
  - name: community
    path: $SNAP/usr/share/cheat/cheatsheets/community
    tags: [ community ]
    readonly: true
EOF

if [ ! -f $SNAP_DATA/usr/share/cheat/conf.yml ]; then
    echo "Initial setup failed"
    exit 1
fi